# ===========================================
# Universal Data Hub - Environment Variables
# ===========================================
# Copy this file to .env and fill in your credentials

# ===========================================
# Core Database (PostgreSQL)
# ===========================================
POSTGRES_DB=data_hub
POSTGRES_USER=dataadmin
POSTGRES_PASSWORD=your_secure_password

# ===========================================
# pgAdmin
# ===========================================
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=your_pgadmin_password

# ===========================================
# Local data directory for exports/logs/photos
# (Optional; defaults to ./data if not set)
# ===========================================
DATA_HUB_DATA_DIR=./data

# ===========================================
# Optional integration credentials (not required for standard file-import setup)
# Leave empty unless you operate your own integration module.
# ===========================================
STRAVA_CLIENT_ID=
STRAVA_CLIENT_SECRET=
STRAVA_REFRESH_TOKEN=

# Adapter toggles (public default = file import only)
ADAPTER_FILE_ENABLED=true
ADAPTER_STRAVA_ENABLED=false
# Optional: load a self-managed Strava adapter implementation from an external module path/package.
# Leave unset for the public standard setup.
ADAPTER_STRAVA_MODULE=@cyclenoid/pwrx-adapter-strava
# Optional host path mounted to /root/.ssh (only if your own integration module requires SSH-based package access)
# Example (Windows): C:/Users/<you>/.ssh
PWRX_SSH_DIR=/root/.ssh

# ===========================================
# Cron Schedules
# ===========================================
# Strava: Daily at 3:00 AM
STRAVA_CRON_SCHEDULE=0 3 * * *

# ===========================================
# Migrations
# ===========================================
# Auto-run DB migrations on startup (optional)
MIGRATE_ON_START=0

# ===========================================
# Watch Folder Import (optional)
# ===========================================
WATCH_FOLDER_ENABLED=false
# Optional UI hint shown on Import page (Finder/Explorer path for users).
# Default Docker setup already falls back to ./data/imports/watch if unset.
# For Unraid/NAS SMB use a UNC path, e.g. \\unraid\pwrx-import
WATCH_FOLDER_SMB_PATH=
WATCH_FOLDER_RECURSIVE=true
WATCH_FOLDER_POLL_SECONDS=15
WATCH_FOLDER_STABLE_CHECKS=2
IMPORT_ZIP_MAX_ENTRIES=500
# Strava full account-export ZIPs often contain many entries (CSV + media + folders)
IMPORT_STRAVA_EXPORT_ZIP_MAX_ENTRIES=20000
IMPORT_ZIP_MAX_TOTAL_BYTES=314572800
IMPORT_QUEUE_API_ENABLED=true
IMPORT_QUEUE_ENABLED=true
IMPORT_QUEUE_POLL_MS=2000
IMPORT_QUEUE_CONCURRENCY=2
IMPORT_QUEUE_MAX_ATTEMPTS=3
IMPORT_QUEUE_RETRY_BASE_MS=5000
IMPORT_QUEUE_RETRY_MAX_MS=300000
IMPORT_QUEUE_HEALTH_STALE_MS=12000
IMPORT_QUEUE_ALERT_FAILED_24H=5
IMPORT_QUEUE_ALERT_READY=20
IMPORT_QUEUE_ALERT_MONITOR_ENABLED=true
IMPORT_QUEUE_ALERT_WEBHOOK_URL=
IMPORT_QUEUE_ALERT_POLL_MS=30000
IMPORT_QUEUE_ALERT_COOLDOWN_MS=300000

# Optional reverse geocoding for local segment naming (disabled by default)
LOCAL_SEGMENTS_REVERSE_GEOCODE_ENABLED=false
LOCAL_SEGMENTS_REVERSE_GEOCODE_URL=https://nominatim.openstreetmap.org/reverse
LOCAL_SEGMENTS_REVERSE_GEOCODE_TIMEOUT_MS=2200
LOCAL_SEGMENTS_REVERSE_GEOCODE_LANGUAGE=de,en
LOCAL_SEGMENTS_REVERSE_GEOCODE_USER_AGENT=PWRX/1.0 (local-segments)
LOCAL_SEGMENTS_VIRTUAL_NAME_PREFERRED=true
# Legacy aliases remain supported: LOCAL_CLIMBS_*
